parameters:
- name: docSysConfigurationFilePath
  type: string
- name: deployPackageAccessToken
  type: string

steps:    
- task: PowerShell@2
  displayName: 'Download deploy package'
  condition: eq(variables.useBuildPipelinesAsSource, false)
  env:
    DeployPackageAccessToken: ${{ parameters.deployPackageAccessToken }}
  inputs:
    targetType: 'inline'
    script: |
      Invoke-WebRequest -Uri "https://docsysdeploysg.blob.core.windows.net/deployment-container/latest/Apps.zip?$env:DeployPackageAccessToken" -OutFile 'DeployPackage.zip'
- task: ExtractFiles@1
  displayName: 'Extract deploy package'
  condition: eq(variables.useBuildPipelinesAsSource, false)
  inputs:
    archiveFilePatterns: DeployPackage.zip
    destinationFolder: '$(Pipeline.Workspace)/Targets'