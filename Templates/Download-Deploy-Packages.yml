parameters:
- name: docSysConfigurationFilePath
  type: string
- name: deployPackageAccessToken
  type: string

steps:
- task: PowerShell@2
  displayName: "Download deploy packages"
  inputs:
    pwsh: true
    targetType: filePath
    filePath: $(Build.SourcesDirectory)\DocSysInfrastructureTemplates\Templates\Scripts\DownloadDeployPackages.ps1
    workingDirectory: "$(Pipeline.Workspace)"
    arguments: '-docSysConfigurationFilePath $(Build.SourcesDirectory)\Infrastructure\Clients\UWV\Config\${{ parameters.docSysConfigurationFilePath }} -deployPackageAccessToken ${{ parameters.deployPackageAccessToken }}'
# - task: PowerShell@2
#   displayName: 'Download deploy package'
#   condition: eq(variables.useBuildPipelinesAsSource, false)
#   env:
#     DeployPackageAccessToken: ${{ parameters.deployPackageAccessToken }}
#   inputs:
#     targetType: 'inline'
#     script: |
#       Invoke-WebRequest -Uri "https://docsysdeploysg.blob.core.windows.net/deployment-container/latest/Apps.zip?$env:DeployPackageAccessToken" -OutFile 'DeployPackage.zip'
# - task: ExtractFiles@1
#   displayName: 'Extract deploy package'
#   condition: eq(variables.useBuildPipelinesAsSource, false)
#   inputs:
#     archiveFilePatterns: DeployPackage.zip
#     destinationFolder: '$(Pipeline.Workspace)/Targets'