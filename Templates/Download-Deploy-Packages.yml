parameters:
- name: docSysConfigurationFilePath
  type: string
- name: deployPackageAccessToken
  type: string
- name: useBuildPipelinesAsSource
  type: boolean
  default: false

steps:
- task: PowerShell@2
  displayName: "Download deploy packages"
  condition: eq(${{ parameters.useBuildPipelinesAsSource }}, false)
  inputs:
    pwsh: true
    targetType: filePath
    filePath: $(Build.SourcesDirectory)\DocSysInfrastructureTemplates\Templates\Scripts\DownloadDeployPackages.ps1
    workingDirectory: "$(Pipeline.Workspace)"
    arguments: '-docSysConfigurationFilePath $(Build.SourcesDirectory)\Infrastructure\Clients\UWV\Config\${{ parameters.docSysConfigurationFilePath }} -deployPackageAccessToken "${{ parameters.deployPackageAccessToken }}" -deployPackageDirectory $(Pipeline.Workspace)/Targets'